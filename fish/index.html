<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ‰‹å‹¢æ’ˆé‡‘é­šï¼ˆé«˜ç•«è³ªé‡è£½ï¼‰</title>

  <!-- ä½ çš„ style.css å¯æ²¿ç”¨ -->
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ä¿åº•æ¨£å¼ï¼ˆå¯åˆªï¼‰ */
    body{margin:0;background:#0b1325;color:#e5e7eb;font:14px/1.6 system-ui,sans-serif}
    #wrap{display:grid;grid-template-columns:320px 1fr;gap:16px;height:100vh;padding:16px;box-sizing:border-box}
    #panel{background:#111827;border-radius:16px;padding:16px}
    #stageWrap{position:relative;background:#0f1b33;border-radius:16px;overflow:hidden}
    #stage{display:block;width:100%;height:100%}
    #fx{position:absolute;inset:0;pointer-events:none}
    .row{margin:10px 0}
    .btn{background:#334155;border:0;padding:8px 12px;border-radius:10px;color:#e5e7eb;cursor:pointer}
    .meter{height:10px;background:#1f2937;border-radius:999px;overflow:hidden}
    .meter i{display:block;height:100%;background:#60a5fa;width:100%}
    #hud{position:absolute;top:10px;right:10px;background:rgba(0,0,0,.25);backdrop-filter: blur(4px);padding:8px 12px;border-radius:999px}
  </style>

  <!-- MediaPipeï¼ˆå¯é¸ï¼›æ²’æ¬Šé™å°±æœƒè‡ªå‹•ç”¨æ»‘é¼  fallbackï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>
</head>
<body>
<div id="wrap">
  <aside id="panel">
    <h2>æ‰‹å‹¢æ’ˆé‡‘é­š <span class="badge">é«˜ç•«è³ª</span></h2>
    <div class="row">
      <button id="btnStart" class="btn">â–¶ é–‹å§‹ / å…è¨±é¡é ­</button>
      <button id="btnReset" class="btn">â†º é‡ç½®</button>
    </div>
    <label class="row"><input id="mirrorChk" type="checkbox" checked> ğŸª é¡åƒæ¨¡å¼</label>
    <div class="row">åˆ†æ•¸ï¼š<b id="score">0</b></div>
    <div class="row">ç¨±è™Ÿï¼š<b id="rankNow">â€”</b> <span id="rankNext"></span></div>
    <div class="row">æ™‚é–“ï¼š<b id="timeLeft">60</b> s</div>
    <div class="row">FPSï¼š<b id="fps">â€”</b></div>
    <div class="row">æ’ˆç¶²è€ä¹…</div>
    <div class="meter"><i id="durFill"></i></div>
    <p class="row" style="opacity:.8">æåˆï¼æ”¶ç¶²ï¼›æ»‘é¼ å·¦éµæŒ‰ä½ä¹Ÿå¯æ’ˆï¼ˆæ²’é¡é ­æ™‚ï¼‰ã€‚</p>
    
    <b>--- åˆ†æ•¸è¨ˆç®— ---</b>
    <div id="score">
      <p><img src="/fish/image/fish1.png" alt="" style="width: 25px; height: 25px;">ï¼š+1åˆ†</p>
      <p><img src="/fish/image/shrimp1.png" alt="" style="width: 25px; height: 25px;">ï¼š+1åˆ†</p>
      <p><img src="/fish/image/fish2.png" alt="" style="width: 25px; height: 25px;">ï¼š+2åˆ†</p>
      <p><img src="/fish/image/fish3.png" alt="" style="width: 25px; height: 25px;">ï¼š+3åˆ†</p>
      <p><img src="/fish/image/fish4.png" alt="" style="width: 25px; height: 25px;">ï¼š+4åˆ†</p>
      <p><img src="/fish/image/trash-1.png" alt="" style="width: 25px; height: 25px;">ï¼š-1åˆ†</p>
      <p><img src="/fish/image/trash-2.png" alt="" style="width: 25px; height: 25px;">ï¼š-2åˆ†</p>
      <p><img src="/fish/image/time.png" alt="" style="width: 25px; height: 25px;">ï¼šæ™‚é–“+5</p>
      <p><img src="/fish/image/treasure.png" alt="" style="width: 25px; height: 25px;">ï¼šè€ä¹…+5</p>
    </div>
  </aside>

  <main id="stageWrap">
    <canvas id="stage"></canvas>
    <canvas id="fx"></canvas>
    <video id="video" playsinline muted style="position:absolute;right:12px;bottom:12px;width:240px;border-radius:12px;opacity:.25"></video>
    <div id="hud">â±ï¸ <b id="hudTime">60</b>sï½œğŸ¯ å‘½ä¸­ï¼š<b id="hudHit">0</b></div>
    <div id="countdownOverlay" class="hide">
      <div id="countdownText"></div>
    </div>
    
    <!-- çµç®— -->
    <div id="modalMask" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.55);align-items:center;justify-content:center">
      <div style="background:#0f172a;border-radius:16px;padding:24px 28px;width:min(520px,90%)">
        <h2 id="resultTitle" style="margin:0 0 8px">æ™‚é–“åˆ°ï¼</h2>
        <p id="resultLine" style="margin:0 0 4px">åˆ†æ•¸ 0ï½œç¨±è™Ÿ â€”</p>
        <p id="resultHint" style="opacity:.8;margin:0 0 12px"></p>
        <button id="btnAgain" class="btn">å†ç©ä¸€æ¬¡</button>
        <button id="btnClose" class="btn">é—œé–‰</button>
      </div>
    </div>
  </main>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
