<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>手勢撈金魚（高畫質重製）</title>

  <!-- 你的 style.css 可沿用 -->
  <link rel="stylesheet" href="style.css" />
  <!-- MediaPipe（可選；沒權限就會自動用滑鼠 fallback） -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>
</head>
<body>
<div id="wrap">
  <aside id="panel">
    <div>
      <h2>手勢撈金魚 <span class="badge">高畫質</span></h2>
      <div class="row">
        <button id="btnStart" class="btn">▶ 開始 / 允許鏡頭</button>
        <button id="btnReset" class="btn">↺ 重置</button>
      </div>
      <label class="row"><input id="mirrorChk" type="checkbox" checked> 🪞 鏡像模式</label>
      <div class="row">分數：<b id="score">0</b></div>
      <div class="row">稱號：<b id="rankNow">—</b> <span id="rankNext"></span></div>
      <div class="row">時間：<b id="timeLeft">60</b> s</div>
      <div class="row">FPS：<b id="fps">—</b></div>
      <div class="row">撈網耐久</div>
      <div class="meter"><i id="durFill"></i></div>
      <p class="row" style="opacity:.8">捏合＝收網；滑鼠左鍵按住也可撈（沒鏡頭時）。</p>
      
    </div>

    <div id="score" style="margin: 20px 0;" >
      <b >--- 分數計算 ---</b>
      <div>
        <p><img src="/fish/image/fish1.png" alt="" style="width: 25px; height: 25px;">：+1分</p>
        <p><img src="/fish/image/shrimp1.png" alt="" style="width: 25px; height: 25px;">：+1分</p>
        <p><img src="/fish/image/fish2.png" alt="" style="width: 25px; height: 25px;">：+2分</p>
        <p><img src="/fish/image/fish3.png" alt="" style="width: 25px; height: 25px;">：+3分</p>
        <p><img src="/fish/image/turtle3.png" alt="" style="width: 25px; height: 25px;">：+3分</p>
        <p><img src="/fish/image/fish4.png" alt="" style="width: 25px; height: 25px;">：+4分</p>
        <p><img src="/fish/image/trash-1.png" alt="" style="width: 25px; height: 25px;">：-1分</p>
        <p><img src="/fish/image/trash-2.png" alt="" style="width: 25px; height: 25px;">：-2分</p>
        <p><img src="/fish/image/time.png" alt="" style="width: 25px; height: 25px;">：時間+5</p>
        <p><img src="/fish/image/treasure.png" alt="" style="width: 25px; height: 25px;">：耐久+5</p>
      </div>
    </div>


    <div id="ranks" style="margin: 20px 0;">
      <b>--- 稱號 ---</b>
      <p>0分：新手撈手</p>
      <p>10分：撈魚學徒</p>
      <p>20分：撈魚高手</p>
      <p>35分：撈金魚達人</p>
      <p>50分：金魚界傳奇</p>
    </div>
  </aside>

  <main id="stageWrap">
    <canvas id="stage"></canvas>
    <canvas id="fx"></canvas>
    <video id="video" playsinline muted style="position:absolute;right:12px;bottom:12px;width:240px;border-radius:12px;opacity:.25"></video>
    <div id="hud">⏱️ <b id="hudTime">60</b>s｜🎯 命中：<b id="hudHit">0</b></div>
    <div id="countdownOverlay" class="hide">
      <div id="countdownText"></div>
    </div>
    
    <!-- 結算 -->
    <div id="modalMask" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.55);align-items:center;justify-content:center">
      <div style="background:#0f172a;border-radius:16px;padding:24px 28px;width:min(520px,90%)">
        <h2 id="resultTitle" style="margin:0 0 8px">時間到！</h2>
        <p id="resultLine" style="margin:0 0 4px">分數 0｜稱號 —</p>
        <p id="resultHint" style="opacity:.8;margin:0 0 12px"></p>
        <button id="btnAgain" class="btn">再玩一次</button>
        <button id="btnClose" class="btn">關閉</button>
      </div>
    </div>
  </main>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
