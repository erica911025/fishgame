<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>手勢撈金魚（MediaPipe Hands）— 華麗結算</title>

  <!-- ✅ MediaPipe CDN -->
  <script type="module" src="js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>

  <!-- ✅ CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="wrap">
    <div id="panel">
      <h1>手勢撈金魚 <span class="badge">MediaPipe Hands</span></h1>
      <div class="row">
        <button id="btnStart" class="btn">▶ 開始遊戲 / 允許鏡頭</button>
        <button id="btnReset" class="btn">↺ 重置</button>
        <label class="toggle"><input id="mirrorChk" type="checkbox" checked> 🪞 鏡像模式</label>
      </div>
      <div class="row">分數：<span id="score" class="score">0</span></div>
      <div class="row">稱號：<span id="rankNow" class="badge">—</span> <span id="rankNext" class="hint"></span></div>
      <div class="row">時間：<span id="timeLeft">60</span>s</div>
      <div class="row">FPS：<span id="fps">–</span></div>
      <div class="row">撈網耐久度（不回復）</div>
      <div class="meter"><i id="durFill"></i></div>
      <p class="hint">手勢：<b>拇指尖(4) 與 食指尖(8) 距離</b> 小於門檻 ⇒ <span class="accent">收網</span>；否則為展開。建議 Chrome/Edge。</p>
      <p class="hint">若鏡頭出不來，請用本機伺服器（VS Code Live Server 或 <code>npx http-server</code>）。</p>
    </div>

    <div id="stageWrap">
      <canvas id="stage"></canvas>
      <canvas id="fx"></canvas>
      <video id="video" playsinline></video>
      <div class="topLeft">🕹️ <b>開手=展網</b>｜<b>捏合=收網</b></div>
      <div class="topRight">⏱️ 倒數：<b id="hudTime">60</b>s｜🎯 命中：<b id="hudHit">0</b></div>
      <div id="toast" class="toast" style="display:none">+1 🐟</div>

      <!-- 結算 Modal -->
      <div id="modalMask">
        <div id="resultModal">
          <div class="center">
            <div class="rankBadge" id="rankBadge">
              <div class="trophy">🏆</div>
              <div class="rankName" id="rankName">—</div>
            </div>
            <div class="resultTitle" id="resultTitle">恭喜完成！</div>
            <div class="resultLine" id="resultLine">分數 0｜稱號 —</div>
            <div class="resultLine hint" id="resultHint"></div>
            <div class="actions">
              <button id="btnAgain" class="btn">再玩一次</button>
              <button id="btnShot" class="btn">📸 截圖下載</button>
              <button id="btnClose" class="btn ghost">關閉</button>
            </div>
            <div class="hint">* 截圖會把遊戲畫面＋稱號徽章合成一張 PNG</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
